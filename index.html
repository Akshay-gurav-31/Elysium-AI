<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
  <!-- Basic Meta Tags -->
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0" />
  <meta name="theme-color" content="#0a0a0a" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  
  <!-- Primary Meta Tags -->
  <title>Mindful Compass Grove | AI-Powered Mental Wellness</title>
  <meta name="description" content="Transform your mental health journey with AI-powered support and professional care at Mindful Compass Grove." />
  <meta name="author" content="Mindful Compass Grove" />
  <meta name="keywords" content="mental health, AI therapy, wellness, mindfulness, counseling, online therapy" />
  <meta name="robots" content="index, follow" />

  <!-- Open Graph / Facebook Meta Tags -->
  <meta property="og:title" content="Mindful Compass Grove | AI-Powered Mental Wellness" />
  <meta property="og:description" content="Transform your mental health journey with AI-powered support and professional care at Mindful Compass Grove." />
  <meta property="og:type" content="website" />
  <meta property="og:url" content="https://mindfulcompassgrove.com" />
  <meta property="og:image" content="https://mindfulcompassgrove.com/images/og-image.jpg" />
  <meta property="og:image:width" content="1200" />
  <meta property="og:image:height" content="630" />
  <meta property="og:site_name" content="Mindful Compass Grove" />
  <meta property="og:locale" content="en_US" />

  <!-- Twitter Meta Tags -->
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:site" content="@mindfulgrove" />
  <meta name="twitter:creator" content="@mindfulgrove" />
  <meta name="twitter:title" content="Mindful Compass Grove | AI-Powered Mental Wellness" />
  <meta name="twitter:description" content="Transform your mental health journey with AI-powered support and professional care." />
  <meta name="twitter:image" content="https://mindfulcompassgrove.com/images/twitter-card.jpg" />

  <!-- Favicon & App Icons -->
  <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
  <link rel="manifest" href="/site.webmanifest">
  <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#2251d9">
  <meta name="msapplication-TileColor" content="#2251d9">

  <!-- Preload Critical Resources -->
  <link rel="preload" href="/src/main.tsx" as="script" fetchpriority="high">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link rel="dns-prefetch" href="https://cdn.gpteng.co">

  <!-- Preload Fonts with Font Face Observer -->
  <link rel="preload" href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Playfair+Display:wght@400;500;600;700&display=swap" as="style" onload="this.onload=null;this.rel='stylesheet'">
  <noscript>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Playfair+Display:wght@400;500;600;700&display=swap">
  </noscript>

  <!-- Critical CSS (inline for performance) -->
  <style id="critical-css">
    [data-loading] {
      display: none !important;
    }
    .loading-spinner {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      display: flex;
      justify-content: center;
      align-items: center;
      background: #0a0a0a;
      z-index: 9999;
    }
    @media (prefers-reduced-motion: reduce) {
      .loading-spinner svg {
        animation: none;
      }
    }
  </style>
</head>

<body class="bg-background text-foreground antialiased">
  <!-- Loading Spinner (shown until React hydrates) -->
  <div id="loading" class="loading-spinner" aria-live="polite" aria-label="Loading application">
    <svg class="animate-spin h-12 w-12 text-primary" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" aria-hidden="true">
      <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
      <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
    </svg>
  </div>

  <!-- Main App Container -->
  <div id="root" data-loading role="main"></div>

  <!-- Scripts with progressive enhancement -->
  <script>
    // Load scripts with feature detection
    function loadScript(src, async = true, module = false) {
      return new Promise((resolve, reject) => {
        const script = document.createElement('script');
        script.src = src;
        script.async = async;
        if (module) script.type = 'module';
        script.onload = resolve;
        script.onerror = reject;
        document.body.appendChild(script);
      });
    }

    // Load scripts after DOM is ready
    document.addEventListener('DOMContentLoaded', () => {
      Promise.all([
        loadScript('https://cdn.gpteng.co/gptengineer.js', true, true),
        loadScript('/src/main.tsx', false, true)
      ]).catch(error => {
        console.error('Script loading error:', error);
      });
    });
  </script>

  <!-- Performance Monitoring with error handling -->
  <script>
    // Enhanced loading state management
    function hideLoadingIndicator() {
      const loadingElement = document.getElementById('loading');
      if (loadingElement) {
        loadingElement.style.opacity = '0';
        setTimeout(() => {
          loadingElement.style.display = 'none';
        }, 300);
      }
      const rootElement = document.getElementById('root');
      if (rootElement) {
        rootElement.removeAttribute('data-loading');
      }
    }

    // Fallback if window.load doesn't fire
    const loadTimeout = setTimeout(hideLoadingIndicator, 5000);
    
    window.addEventListener('load', function() {
      clearTimeout(loadTimeout);
      hideLoadingIndicator();
      
      // Track performance metrics if supported
      if (window.performance && performance.timing) {
        const { timing } = performance;
        const loadTime = timing.loadEventEnd - timing.navigationStart;
        const domReadyTime = timing.domComplete - timing.domLoading;
        
        console.log('Page load time:', loadTime + 'ms');
        console.log('DOM ready time:', domReadyTime + 'ms');
        
        // Send metrics to analytics if available
        if (window.analytics) {
          window.analytics.track('Page Load', {
            loadTime: loadTime,
            domReadyTime: domReadyTime
          });
        }
      }
    });

    // Error tracking
    window.addEventListener('error', function(e) {
      console.error('Uncaught error:', e.error);
      if (window.analytics) {
        window.analytics.track('JavaScript Error', {
          message: e.message,
          filename: e.filename,
          lineno: e.lineno,
          colno: e.colno,
          error: e.error?.toString()
        });
      }
    });
  </script>
</body>
</html>
